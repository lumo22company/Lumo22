<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activate your Digital Front Desk | Lumo 22</title>
  <meta name="description" content="Choose your Digital Front Desk plan and activate. No setup calls, just go live.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}">
  <style>
    .activate-section { padding-top: 6rem; padding-bottom: 4rem; }
    .activate-intro { max-width: 560px; margin: 0 auto 2.5rem; text-align: center; }
    .activate-intro h1 { font-family: var(--font-display); font-size: 1.75rem; margin-bottom: 0.75rem; }
    .activate-intro p { color: var(--lum-text-muted); line-height: 1.6; }
    .activate-plans { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1.25rem; max-width: 900px; margin: 0 auto 2rem; }
    .activate-plan { padding: 1.5rem; background: var(--lum-card-bg, rgba(255,255,255,0.03)); border: 1px solid var(--lum-border); border-radius: 12px; cursor: pointer; transition: border-color 0.2s, box-shadow 0.2s; }
    .activate-plan:hover { border-color: var(--lum-text-subtle); }
    .activate-plan.selected { border-color: var(--lum-gold); box-shadow: 0 0 0 1px var(--lum-gold); }
    .activate-plan h3 { font-family: var(--font-display); font-size: 1.1rem; margin-bottom: 0.25rem; }
    .activate-plan .price { color: var(--lum-gold); font-size: 1.25rem; margin: 0.5rem 0; }
    .activate-plan .desc { color: var(--lum-text-muted); font-size: 0.9rem; line-height: 1.4; }
    .activate-tcs { max-width: 520px; margin: 0 auto 1.5rem; padding: 1rem; background: var(--lum-surface-elevated); border-radius: 8px; border: 1px solid var(--lum-border); }
    .activate-tcs label { display: flex; align-items: flex-start; gap: 0.75rem; cursor: pointer; color: var(--lum-text-muted); font-size: 0.95rem; line-height: 1.5; }
    .activate-tcs input[type="checkbox"] { margin-top: 0.2rem; flex-shrink: 0; width: 1.1rem; height: 1.1rem; accent-color: var(--lum-gold); }
    .activate-tcs a { color: var(--lum-gold); text-decoration: none; }
    .activate-tcs a:hover { text-decoration: underline; }
    .activate-cta-wrap { text-align: center; }
    .activate-cta-wrap .btn-disabled { opacity: 0.5; pointer-events: none; cursor: not-allowed; }
    .activate-cta-wrap .no-link-msg { color: var(--lum-text-muted); font-size: 0.95rem; margin-top: 1rem; }
    .activate-cta-wrap .no-link-msg a { color: var(--lum-gold); }
    .activate-back { text-align: center; margin-top: 1.5rem; }
    .activate-back a { color: var(--lum-text-muted); text-decoration: none; font-size: 0.95rem; }
    .activate-back a:hover { color: var(--lum-text); }
  </style>
</head>
<body class="lumo-landing">
  <nav class="lumo-nav lumo-nav-scrolled">
    <a href="/" class="lumo-nav-logo">Lumo 22</a>
    <div class="lumo-nav-links">
      <a href="/captions">Captions</a>
      <a href="/digital-front-desk">Front Desk</a>
      <a href="/digital-front-desk#pricing">Pricing</a>
    </div>
    <a href="/digital-front-desk#pricing" class="lumo-nav-cta">View plans</a>
  </nav>

  <section class="lumo-section activate-section">
    <div class="activate-intro">
      <h1>Activate your Digital Front Desk</h1>
      <p>Choose your plan and go live — no setup calls required. Email only, or add the Chat Assistant. Prefer <a href="/website-chat" style="color: var(--lum-gold);">chat only</a>? See <a href="/digital-front-desk#pricing" style="color: var(--lum-gold);">pricing</a>.</p>
    </div>

    <div class="activate-plans" id="plan-cards">
      <div class="activate-plan" data-plan="starter" data-addon-price="25" role="button" tabindex="0">
        <h3>Starter</h3>
        <p class="price">£79 <span style="font-size: 0.85rem; font-weight: 400; color: var(--lum-text-muted);">/month</span></p>
        <p class="desc">Email receptionist only. Up to 100 enquiries/month, instant replies, 24/7. Add Chat Assistant available.</p>
      </div>
      <div class="activate-plan" data-plan="standard" data-addon-price="35" role="button" tabindex="0">
        <h3>Growth</h3>
        <p class="price">£149 <span style="font-size: 0.85rem; font-weight: 400; color: var(--lum-text-muted);">/month</span></p>
        <p class="desc">Email receptionist — more capacity. Up to 300 enquiries/month, lead tracking, booking config, priority support. Add Chat Assistant available.</p>
      </div>
      <div class="activate-plan" data-plan="premium" data-addon-price="45" role="button" tabindex="0">
        <h3>Pro</h3>
        <p class="price">£299 <span style="font-size: 0.85rem; font-weight: 400; color: var(--lum-text-muted);">/month</span></p>
        <p class="desc">Email receptionist — unlimited. Multi-channel (email + SMS), custom setup, dedicated support. Add Chat Assistant available.</p>
      </div>
    </div>

    <div class="activate-addon-wrap" id="activate-addon-wrap" style="display: none; max-width: 520px; margin: 0 auto 1.5rem; padding: 1rem; background: var(--lum-surface-elevated); border-radius: 8px; border: 1px solid var(--lum-border);">
      <p style="font-size: 0.9rem; color: var(--lum-text-muted); margin-bottom: 0.75rem;">Chat works alongside email — one receptionist across your inbox and website. Instant, intelligent replies using your business details. Chat features scale with your selected email plan.</p>
      <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer; color: var(--lum-text); font-size: 0.95rem;">
        <input type="checkbox" id="add-chat-toggle" style="width: 1.1rem; height: 1.1rem; accent-color: var(--lum-gold);">
        <span id="add-chat-label">Add Chat Assistant (+£59) — 5% off bundle total</span>
      </label>
    </div>

    <div class="activate-cta-wrap">
      <a href="#" id="btn-activate" class="lumo-btn-primary btn-disabled">Continue to payment</a>
      <p class="no-link-msg" id="no-link-msg" style="display: none;">Payment for this plan isn’t available yet. Try another plan or check back soon.</p>
    </div>
    <p class="activate-back"><a href="/digital-front-desk">← Back to Digital Front Desk</a> · <a href="/website-chat">Chat Assistant</a> · <a href="/digital-front-desk#pricing">Pricing</a> · <a href="/">Lumo 22 home</a></p>
  </section>

  <footer class="lumo-footer">
    <div class="lumo-footer-inner">
      <div>
        <a href="/" class="lumo-footer-brand">Lumo 22</a>
        <p class="lumo-footer-tagline">Lighting the way to better business</p>
      </div>
      <div class="lumo-footer-links">
        <a href="/captions">Captions</a>
        <a href="/digital-front-desk">Front Desk</a>
        <a href="/digital-front-desk#pricing">Pricing</a>
        <a href="/terms">Terms</a>
        <a href="mailto:hello@lumo22.com">Contact</a>
      </div>
    </div>
    <div class="lumo-footer-bottom">© Lumo 22. All rights reserved.</div>
  </footer>

  {% include '_terms_modal.html' %}
  <script>
    (function() {
      var planLinks = {
        starter: {{ (activation_link_starter or activation_link) | tojson | safe }},
        standard: {{ (activation_link_standard or activation_link) | tojson | safe }},
        premium: {{ (activation_link_premium or activation_link) | tojson | safe }}
      };
      var bundleLinks = {
        starter: {{ (activation_link_starter_bundle or activation_link_starter or activation_link) | tojson | safe }},
        standard: {{ (activation_link_standard_bundle or activation_link_standard or activation_link) | tojson | safe }},
        premium: {{ (activation_link_premium_bundle or activation_link_premium or activation_link) | tojson | safe }}
      };
      var basePrices = { starter: 79, standard: 149, premium: 299 };
      var chatPrice = 59;
      var bundleDiscountPercent = 5;
      function getBundleTotal(plan) { return Math.round((basePrices[plan] + chatPrice) * (1 - bundleDiscountPercent / 100)); }
      var cards = document.querySelectorAll('.activate-plan');
      var btn = document.getElementById('btn-activate');
      var noLinkMsg = document.getElementById('no-link-msg');
      var addonWrap = document.getElementById('activate-addon-wrap');
      var addonToggle = document.getElementById('add-chat-toggle');
      var addonLabel = document.getElementById('add-chat-label');
      var selectedPlan = null;

      function getPaymentUrl() {
        if (!selectedPlan) return null;
        var addon = addonToggle && addonToggle.checked;
        return addon ? (bundleLinks[selectedPlan] || planLinks[selectedPlan]) : (planLinks[selectedPlan] || null);
      }

      function updateAddonLabel() {
        if (!selectedPlan || !addonLabel) return;
        addonLabel.textContent = 'Add Chat Assistant (+£' + chatPrice + ') — ' + bundleDiscountPercent + '% off';
      }

      function updateBtn() {
        var url = getPaymentUrl();
        if (!selectedPlan) {
          btn.classList.add('btn-disabled');
          btn.href = '#';
          btn.textContent = 'Continue to payment';
          noLinkMsg.style.display = 'none';
          if (addonWrap) addonWrap.style.display = 'none';
          return;
        }
        if (addonWrap) addonWrap.style.display = 'block';
        updateAddonLabel();
        if (url) {
          btn.classList.remove('btn-disabled');
          btn.href = '#';
          var addon = addonToggle && addonToggle.checked;
          var total = addon ? getBundleTotal(selectedPlan) : basePrices[selectedPlan];
          btn.textContent = addon ? 'Continue to payment — £' + total + '/month' : 'Continue to payment';
          noLinkMsg.style.display = 'none';
        } else {
          btn.classList.add('btn-disabled');
          btn.href = '#';
          noLinkMsg.style.display = 'block';
        }
      }

      btn.addEventListener('click', function(e) {
        e.preventDefault();
        var url = getPaymentUrl();
        if (url && window.openTermsModal) window.openTermsModal(url);
      });

      if (addonToggle) addonToggle.addEventListener('change', updateBtn);

      cards.forEach(function(card) {
        card.addEventListener('click', function() {
          selectedPlan = card.dataset.plan;
          cards.forEach(function(c) { c.classList.remove('selected'); });
          card.classList.add('selected');
          updateBtn();
        });
        card.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            card.click();
          }
        });
      });

      var params = new URLSearchParams(window.location.search);
      var planParam = params.get('plan');
      var addChatParam = params.get('add_chat');
      if (planParam && ['starter', 'standard', 'premium'].indexOf(planParam) !== -1) {
        var card = document.querySelector('.activate-plan[data-plan="' + planParam + '"]');
        if (card) { card.click(); }
        if (addChatParam === '1' && addonToggle) { addonToggle.checked = true; updateBtn(); }
      }
      updateBtn();
    })();
  </script>
</body>
</html>
